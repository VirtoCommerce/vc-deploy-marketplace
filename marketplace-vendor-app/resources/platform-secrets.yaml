apiVersion: v1
kind: ConfigMap
metadata:
  name: platform-secret-configmap
data:
    templates-base.hcl: |
      {{ with secret "secret/redis" }}
      export ConnectionStrings__RedisConnectionString=redis-master.redis:6379,password={{ .Data.REDIS_PASS }},ssl=False,abortConnect=False
      {{ end }} 
      {{ with secret "secret/mssql" }}
      export ConnectionStrings__VirtoCommerce="Server=tcp:$(VC_DB_HOST),1433;Database=marketplace-operator-platform_$(VC_NAMESPACE);User ID=$(VC_DB_USER)@$(VC_DB);Password={{ .Data.db_password }};Trusted_Connection=False;Encrypt=True;"
      {{ end }}
    templates-custom.hcl: |
      {{ with secret "secret/notifications" }}
      export Notifications__SendGrid__ApiKey="{{ .Data.apikey }}"
      {{ end }}
      {{ with secret "secret/notifications" }}
      export Notifications__Smtp__Password="{{ .Data.password }}"
      {{ end }}